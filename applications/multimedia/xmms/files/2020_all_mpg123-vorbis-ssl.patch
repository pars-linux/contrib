diff -Naurp xmms-1.2.10-r10/configure.in xmms-1.2.10-r10.ssl/configure.in
--- xmms-1.2.10-r10/configure.in	2005-01-31 14:24:03.417908000 -0800
+++ xmms-1.2.10-r10.ssl/configure.in	2005-01-31 14:42:01.866438080 -0800
@@ -159,6 +159,22 @@ AC_SUBST(OPENGL_LIBS)
 
 AM_CONDITIONAL(HAVE_OPENGL, test "x$have_opengl" = xyes)
 
+dnl *** OpenSSL support
+AC_ARG_ENABLE( ssl,
+[  --disable-ssl           Disable HTTP SSL in plugin(s) [default=enabled]],,
+		enable_ssl="yes")
+
+if test "x$enable_ssl" = xyes; then
+	SSL_LIBS=""
+	AC_CHECK_LIB(ssl, SSL_read, [SSL_LIBS="-lssl"
+			AC_DEFINE(HTTP_SSL,,[Define if OpenSSL is available])
+			AC_DEFINE(OPENSSL_NO_KRB5,,[Define if OpenSSL is available])], 
+			echo "*** SSL support requires openssl and openssl-devel packages ***")
+	LIBS="$LIBS $SSL_LIBS"
+else
+	AC_MSG_RESULT([*** Disabling SSL in plugin(s) per user request ***])
+	have_ssl=no
+fi
 
 dnl *** zlib
 LIBS_save=$LIBS
diff -Naurp xmms-1.2.10-r10/Input/mpg123/common.c xmms-1.2.10-r10.ssl/Input/mpg123/common.c
--- xmms-1.2.10-r10/Input/mpg123/common.c	2005-01-31 14:24:08.627031000 -0800
+++ xmms-1.2.10-r10.ssl/Input/mpg123/common.c	2005-01-31 14:42:15.246541126 -0800
@@ -464,7 +464,11 @@ int mpg123_decode_header(struct frame *f
 void mpg123_open_stream(char *bs_filenam, int fd, unsigned long range)
 {
 	filept_opened = 1;
+#ifdef HTTP_SSL
+	if (!strncasecmp(bs_filenam, "http://", 7) || !strncasecmp(bs_filenam, "https://", 8))
+#else
 	if (!strncasecmp(bs_filenam, "http://", 7))
+#endif
 	{
 		filept = NULL;
 		mpg123_info->filesize = 0;
diff -Naurp xmms-1.2.10-r10/Input/mpg123/http.c xmms-1.2.10-r10.ssl/Input/mpg123/http.c
--- xmms-1.2.10-r10/Input/mpg123/http.c	2005-01-31 14:24:07.000000000 -0800
+++ xmms-1.2.10-r10.ssl/Input/mpg123/http.c	2005-01-31 14:42:15.276534641 -0800
@@ -33,6 +33,14 @@
 #include "mpg123.h"
 #include "libxmms/util.h"
 
+#ifdef HTTP_SSL
+#include <openssl/ssl.h>
+#include <openssl/err.h>
+#include <openssl/x509.h>
+#include <openssl/pem.h>
+#include <openssl/crypto.h>
+#endif
+
 #define min(x,y) ((x)<(y)?(x):(y))
 #define min3(x,y,z) (min(x,y)<(z)?min(x,y):(z))
 #define min4(x,y,z,w) (min3(x,y,z)<(w)?min3(x,y,z):(w))
@@ -117,7 +125,11 @@ static gchar *basic_authentication_encod
 	return res;
 }
 
+#ifdef HTTP_SSL
+static void parse_url(const gchar * url, gchar ** user, gchar ** pass, gchar ** host, int *port, gchar ** filename, int *ssl)
+#else
 static void parse_url(const gchar * url, gchar ** user, gchar ** pass, gchar ** host, int *port, gchar ** filename)
+#endif
 {
 	gchar *h, *p, *pt, *f, *temp, *ptr;
 
@@ -126,6 +138,14 @@ static void parse_url(const gchar * url,
 
 	if (!strncasecmp("http://", ptr, 7))
 		ptr += 7;
+#ifdef HTTP_SSL
+	if (!strncasecmp("https://", ptr, 8)) {
+		ptr += 8;
+		*ssl = 1;
+	} else
+		*ssl = 0;
+#endif
+	
 	h = strchr(ptr, '@');
 	f = strchr(ptr, '/');
 	if (h != NULL && (!f || h < f))
@@ -160,7 +180,12 @@ static void parse_url(const gchar * url,
 	{
 		if (f)
 			*f = '\0';
-		*port = 80;
+#ifdef HTTP_SSL
+		if (*ssl)
+			*port = 443;
+		else
+#endif
+			*port = 80;
 	}
 	*host = g_strdup(h);
 	
@@ -302,16 +327,27 @@ static gboolean http_check_for_data(void
 	return FALSE;
 }
 
+#ifdef HTTP_SSL
+gint mpg123_http_read_line(gchar * buf, gint size, SSL *ssl_c)
+#else
 gint mpg123_http_read_line(gchar * buf, gint size)
+#endif
 {
-	gint i = 0;
+	gint i = 0, rc;
 
 	while (going && i < size - 1)
 	{
 		if (http_check_for_data())
 		{
-			if (read(sock, buf + i, 1) <= 0)
-				return -1;
+#ifdef HTTP_SSL
+			if (ssl_c) {
+				while ((rc = SSL_read(ssl_c, buf + i, 1)) == -1);
+				if (rc <= 0)
+					return -1;
+			} else
+#endif
+				if (read(sock, buf + i, 1) <= 0)
+					return -1;
 			if (buf[i] == '\n')
 				break;
 			if (buf[i] != '\r')
@@ -341,7 +377,13 @@ static void *http_buffer_loop(void *arg)
 	struct sockaddr_in address;
 #endif
 	struct timeval tv;
-
+#ifdef HTTP_SSL
+	SSL *ssl_c = NULL;
+	SSL_CTX *ssl_ctx = NULL;
+	BIO *b = NULL;
+	gint ssl=0;
+#endif
+	
 	url = (gchar *) arg;
 	do
 	{
@@ -349,7 +391,11 @@ static void *http_buffer_loop(void *arg)
 	
 		g_strstrip(url);
 
+#ifdef HTTP_SSL
+		parse_url(url, &user, &pass, &host, &port, &filename, &ssl);
+#else
 		parse_url(url, &user, &pass, &host, &port, &filename);
+#endif
 
 		if ((!filename || !*filename) && url[strlen(url) - 1] != '/')
 			temp = g_strconcat(url, "/", NULL);
@@ -361,6 +407,26 @@ static void *http_buffer_loop(void *arg)
 		chost = mpg123_cfg.use_proxy ? mpg123_cfg.proxy_host : host;
 		cport = mpg123_cfg.use_proxy ? mpg123_cfg.proxy_port : port;
 
+#ifdef HTTP_SSL
+		if (ssl) {
+			SSL_library_init();
+			OpenSSL_add_ssl_algorithms();
+			SSL_load_error_strings();
+			
+			ssl_ctx = SSL_CTX_new(SSLv23_client_method());
+			if (ssl_ctx == NULL) {
+				fprintf(stderr, "SSL_CTX_new() failed.");
+				eof = TRUE;
+			}
+			
+			ssl_c = SSL_new(ssl_ctx);
+			if (ssl_c == NULL) {
+				fprintf(stderr, "SSL_new() failed.\n");
+				eof = TRUE;
+			}
+		}
+#endif
+
 #ifdef USE_IPV6
 		g_snprintf(service, 6, "%d", cport);
 		memset(&hints, 0, sizeof(hints));
@@ -440,7 +506,20 @@ static void *http_buffer_loop(void *arg)
 					eof = TRUE;
 				}
 			}
+#ifdef HTTP_SSL
+			if (ssl) {
+				b = BIO_new_socket(sock, BIO_NOCLOSE);
+				if (b == NULL) {
+					printf("BIO_new_socket() failed.\n");
+					eof = TRUE;
+				}
+				
+				// cannot fail
+				SSL_set_bio(ssl_c, b, b);
+			} 
+#endif
 #endif
+			
 			while (going)
 			{
 				tv.tv_sec = 0;
@@ -465,6 +544,24 @@ static void *http_buffer_loop(void *arg)
 					break;
 				}
 			}
+#ifdef HTTP_SSL
+			if (ssl) {
+				int rc;
+
+				SSL_set_connect_state(ssl_c);
+				
+				while ((rc = SSL_connect(ssl_c)) == -1); 
+				if (rc <= 0) {
+					fprintf(stderr, "SSL_connect() error. SSL error code: %d.\n", 
+						SSL_get_error(ssl_c, rc));
+				}
+				while ((rc = SSL_do_handshake(ssl_c)) == -1); 
+				if (rc <= 0) {
+					fprintf(stderr, "SSL_do_handshake() error. SSL error code: %d.\n",
+						SSL_get_error(ssl_c, rc));
+				}
+			}
+#endif
 			if (!eof)
 			{
 				gchar *auth = NULL, *proxy_auth = NULL;
@@ -516,14 +613,30 @@ static void *http_buffer_loop(void *arg)
 					g_free(proxy_auth);
 				if(auth)
 					g_free(auth);
-				write(sock, temp, strlen(temp));
+#ifdef HTTP_SSL
+				if (ssl) {
+					int rc;
+					while ((rc = SSL_write(ssl_c, temp, strlen(temp))) == -1);
+					if (rc <= 0) {
+						fprintf(stderr, "SSL_write() error. SSL error code: %d.\n",
+							SSL_get_error(ssl_c, rc));
+						eof = TRUE;
+					}
+				} else
+#endif
+					write(sock, temp, strlen(temp));
+
 				g_free(temp);
 				mpg123_ip.set_info_text(_("CONNECTED: WAITING FOR REPLY"));
 				while (going && !eof)
 				  {
 					if (http_check_for_data())
 					{
+#ifdef HTTP_SSL
+						if (mpg123_http_read_line(line, 1024, ssl_c))
+#else
 						if (mpg123_http_read_line(line, 1024))
+#endif
 						{
 							status = strchr(line, ' ');
 							if (status)
@@ -536,7 +649,11 @@ static void *http_buffer_loop(void *arg)
 									{
 										if(http_check_for_data())
 										{
+#ifdef HTTP_SSL
+											if((cnt = mpg123_http_read_line(line, 1024, ssl_c)) != -1)
+#else
 											if((cnt = mpg123_http_read_line(line, 1024)) != -1)
+#endif
 											{
 												if(!cnt)
 													break;
@@ -578,7 +695,11 @@ static void *http_buffer_loop(void *arg)
 				{
 					if (http_check_for_data())
 					{
+#ifdef HTTP_SSL
+						if ((cnt = mpg123_http_read_line(line, 1024, ssl_c)) != -1)
+#else
 						if ((cnt = mpg123_http_read_line(line, 1024)) != -1)
+#endif
 						{
 							if (!cnt)
 								break;
@@ -616,6 +737,10 @@ static void *http_buffer_loop(void *arg)
 				fclose(output_file);
 				output_file = NULL;
 			}
+#ifdef HTTP_SSL
+			if (ssl)
+				SSL_shutdown(ssl_c);
+#endif
 			close(sock);
 			g_free(user);
 			g_free(pass);
@@ -633,6 +758,10 @@ static void *http_buffer_loop(void *arg)
 		fname = file;
 		if (!strncasecmp(fname, "http://", 7))
 			fname += 7;
+#ifdef HTTP_SSL
+		if (!strncasecmp(fname, "https://", 8))
+			fname += 8;
+#endif
 		temp = strrchr(fname, '.');
 		if (temp && !strcasecmp(temp, ".mp3"))
 			*temp = '\0';
@@ -667,7 +796,12 @@ static void *http_buffer_loop(void *arg)
 				cnt = min(http_free(), buffer_length - wr_index);
 				if (cnt > 1024)
 					cnt = 1024;
-				written = read(sock, buffer + wr_index, cnt);
+#ifdef HTTP_SSL
+				if (ssl) 
+					while ((written = SSL_read(ssl_c, buffer + wr_index, cnt)) == -1);
+				else
+#endif
+					written = read(sock, buffer + wr_index, cnt);
 				if (written <= 0)
 				{
 					eof = TRUE;
@@ -714,6 +848,10 @@ static void *http_buffer_loop(void *arg)
 		fclose(output_file);
 		output_file = NULL;
 	}
+#ifdef HTTP_SSL
+	if (ssl)
+		SSL_shutdown(ssl_c);
+#endif
 	close(sock);
 	if (udp_sock != 0)
 		close(udp_sock);
diff -Naurp xmms-1.2.10-r10/Input/mpg123/mpg123.c xmms-1.2.10-r10.ssl/Input/mpg123/mpg123.c
--- xmms-1.2.10-r10/Input/mpg123/mpg123.c	2005-01-31 14:24:08.664024000 -0800
+++ xmms-1.2.10-r10.ssl/Input/mpg123/mpg123.c	2005-01-31 14:52:46.017466999 -0800
@@ -320,7 +320,11 @@ static int is_our_file(char *filename)
 	char *ext;
 	guint16 wavid;
 
+#ifdef HTTP_SSL
+	if (!strncasecmp(filename, "http://", 7) || !strncasecmp(filename, "https://", 8))
+#else
 	if (!strncasecmp(filename, "http://", 7))
+#endif
 	{			/* We assume all http:// (except those ending in .ogg) are mpeg -- why do we do that? */
 		ext = strrchr(filename, '.');
 		if (ext)
@@ -795,7 +799,11 @@ static void get_song_info(char *filename
 	/*
 	 * TODO: Getting song info from http streams.
 	 */
+#ifdef HTTP_SSL
+	if (strncasecmp(filename, "http://", 7) && strncasecmp(filename, "https://", 8))
+#else
 	if (strncasecmp(filename, "http://", 7))
+#endif
 	{
 		if ((file = fopen(filename, "rb")) != NULL)
 		{
@@ -883,7 +891,12 @@ static void *decode_loop(void *arg)
 		mpg123_init_layer3(fr.down_sample_sblimit);
 
 		mpg123_info->tpf = mpg123_compute_tpf(&fr);
+
+#ifdef HTTP_SSL
+		if (strncasecmp(filename, "http://", 7) && strncasecmp(filename, "https://", 8))
+#else
 		if (strncasecmp(filename, "http://", 7))
+#endif
 		{
 			if (mpg123_stream_check_for_xing_header(&fr, &xing_header))
 			{
@@ -930,7 +943,11 @@ static void *decode_loop(void *arg)
 		mpg123_mode = fr.mode;
 		mpg123_length = mpg123_info->num_frames * mpg123_info->tpf * 1000;
 		
+#ifdef HTTP_SSL
+		if (strncasecmp(filename, "http://", 7) && strncasecmp(filename, "https://", 8))
+#else
 		if (strncasecmp(filename, "http://", 7))
+#endif
 		{
 			if (!mpg123_title)
 				mpg123_title = get_song_title(NULL,filename);
@@ -1043,7 +1060,11 @@ static void *decode_loop(void *arg)
 					{
 						/* FIXME networks streams */
 						disp_bitrate = mpg123_bitrate;
+#ifdef HTTP_SSL
+						if(!have_xing_header && strncasecmp(filename,"http://",7) && strncasecmp(filename, "https://", 8))
+#else
 						if(!have_xing_header && strncasecmp(filename,"http://",7))
+#endif
 						{
 							double rel = mpg123_relative_pos();
 							if (rel)
diff -Naurp xmms-1.2.10-r10/Input/vorbis/fileinfo.c xmms-1.2.10-r10.ssl/Input/vorbis/fileinfo.c
--- xmms-1.2.10-r10/Input/vorbis/fileinfo.c	2005-01-31 14:24:03.000000000 -0800
+++ xmms-1.2.10-r10.ssl/Input/vorbis/fileinfo.c	2005-01-31 14:54:32.907864263 -0800
@@ -221,7 +221,12 @@ static void save_cb(GtkWidget * w, gpoin
 	vcedit_state *state;
 	vorbis_comment *comment;
 
+#ifdef HTTP_SSL
+	if (!g_strncasecmp(vte.filename, "http://", 7) || 
+	    !g_strncasecmp(vte.filename, "https://", 8))
+#else
 	if (!g_strncasecmp(vte.filename, "http://", 7))
+#endif
 		return;
 	
 	state = vcedit_new_state();
@@ -297,7 +302,12 @@ static void remove_cb(GtkWidget * w, gpo
 	vcedit_state *state;
 	vorbis_comment *comment;
 
+#ifdef HTTP_SSL
+	if (!g_strncasecmp(vte.filename, "http://", 7) || 
+	    !g_strncasecmp(vte.filename, "https://", 8))
+#else
 	if (!g_strncasecmp(vte.filename, "http://", 7))
+#endif
 		return;
 
 	state = vcedit_new_state();
@@ -783,7 +793,12 @@ void vorbis_file_info_box(char *fn)
 	} else
 		gdk_window_raise(window->window);
 
+#ifdef HTTP_SSL
+	if (!g_strncasecmp(vte.filename, "http://", 7) || 
+	    !g_strncasecmp(vte.filename, "https://", 8))
+#else
 	if (!g_strncasecmp(vte.filename, "http://", 7))
+#endif
 		gtk_widget_set_sensitive(tag_frame, FALSE);
 	else
 		gtk_widget_set_sensitive(tag_frame, TRUE);		
diff -Naurp xmms-1.2.10-r10/Input/vorbis/http.c xmms-1.2.10-r10.ssl/Input/vorbis/http.c
--- xmms-1.2.10-r10/Input/vorbis/http.c	2003-09-04 13:59:05.000000000 -0700
+++ xmms-1.2.10-r10.ssl/Input/vorbis/http.c	2005-01-31 14:54:32.922860604 -0800
@@ -39,6 +39,10 @@
 #include "xmms/plugin.h"
 #include "xmms/i18n.h"
 
+#ifdef HTTP_SSL
+#include <openssl/ssl.h>
+#endif
+
 #define min(x,y) ((x)<(y)?(x):(y))
 #define min3(x,y,z) (min(x,y)<(z)?min(x,y):(z))
 #define min4(x,y,z,w) (min3(x,y,z)<(w)?min3(x,y,z):(w))
@@ -116,7 +120,11 @@ static gchar *basic_authentication_encod
 	return res;
 }
 
+#ifdef HTTP_SSL
+static void parse_url(const gchar * url, gchar ** user, gchar ** pass, gchar ** host, int *port, gchar ** filename, int *ssl)
+#else
 static void parse_url(const gchar * url, gchar ** user, gchar ** pass, gchar ** host, int *port, gchar ** filename)
+#endif
 {
 	gchar *h, *p, *pt, *f, *temp, *ptr;
 
@@ -125,6 +133,14 @@ static void parse_url(const gchar * url,
 
 	if (!strncasecmp("http://", ptr, 7))
 		ptr += 7;
+#ifdef HTTP_SSL
+	if (!strncasecmp("https://", ptr, 8)) {
+		ptr += 8;
+		*ssl = 1;
+	} else
+		*ssl = 0;
+#endif
+	
 	h = strchr(ptr, '@');
 	f = strchr(ptr, '/');
 	if (h != NULL && (!f || h < f))
@@ -159,7 +175,12 @@ static void parse_url(const gchar * url,
 	{
 		if (f)
 			*f = '\0';
-		*port = 80;
+#ifdef HTTP_SSL
+		if (*ssl)
+			*port = 443;
+		else
+#endif
+			*port = 80;
 	}
 	*host = g_strdup(h);
 	
@@ -257,16 +278,27 @@ static gboolean http_check_for_data(void
 	return FALSE;
 }
 
+#ifdef HTTP_SSL
+gint vorbis_http_read_line(gchar * buf, gint size, SSL *ssl_c)
+#else
 gint vorbis_http_read_line(gchar * buf, gint size)
+#endif
 {
-	gint i = 0;
+	gint i = 0, rc;
 
 	while (going && i < size - 1)
 	{
 		if (http_check_for_data())
 		{
-			if (read(sock, buf + i, 1) <= 0)
-				return -1;
+#ifdef HTTP_SSL
+                       if (ssl_c) {
+                               while ((rc = SSL_read(ssl_c, buf + i, 1)) == -1);
+                               if (rc <= 0)
+                                       return -1;
+                       } else
+#endif
+				if (read(sock, buf + i, 1) <= 0)
+					return -1;
 			if (buf[i] == '\n')
 				break;
 			if (buf[i] != '\r')
@@ -295,6 +327,12 @@ static void *http_buffer_loop(void *arg)
 	struct sockaddr_in address;
 #endif
 	struct timeval tv;
+#ifdef HTTP_SSL
+	SSL *ssl_c = NULL;
+	SSL_CTX *ssl_ctx = NULL;
+	BIO *b = NULL;
+	gint ssl=0;
+#endif
 
 	url = (gchar *) arg;
 	do
@@ -303,7 +341,11 @@ static void *http_buffer_loop(void *arg)
 	
 		g_strstrip(url);
 
+#ifdef HTTP_SSL
+		parse_url(url, &user, &pass, &host, &port, &filename, &ssl);
+#else
 		parse_url(url, &user, &pass, &host, &port, &filename);
+#endif
 
 		if ((!filename || !*filename) && url[strlen(url) - 1] != '/')
 			temp = g_strconcat(url, "/", NULL);
@@ -315,6 +357,26 @@ static void *http_buffer_loop(void *arg)
 		chost = vorbis_cfg.use_proxy ? vorbis_cfg.proxy_host : host;
 		cport = vorbis_cfg.use_proxy ? vorbis_cfg.proxy_port : port;
 
+#ifdef HTTP_SSL
+		if (ssl) {
+			SSL_library_init();
+			OpenSSL_add_ssl_algorithms();
+			SSL_load_error_strings();
+
+			ssl_ctx = SSL_CTX_new(SSLv23_client_method());
+			if (ssl_ctx == NULL) {
+				fprintf(stderr, "SSL_CTX_new() failed.");
+				eof = TRUE;
+			}
+
+			ssl_c = SSL_new(ssl_ctx);
+			if (ssl_c == NULL) {
+				fprintf(stderr, "SSL_new() failed.\n");
+				eof = TRUE;
+			}
+		}
+#endif
+
 #ifdef USE_IPV6
 		g_snprintf(service, 6, "%d", cport);
 		memset(&hints, 0, sizeof(hints));
@@ -393,6 +455,18 @@ static void *http_buffer_loop(void *arg)
 					eof = TRUE;
 				}
 			}
+#ifdef HTTP_SSL
+			if (ssl) {
+				b = BIO_new_socket(sock, BIO_NOCLOSE);
+				if (b == NULL) {
+					printf("BIO_new_socket() failed.\n");
+					eof = TRUE;
+				}
+
+				// cannot fail
+				SSL_set_bio(ssl_c, b, b);
+			}
+#endif
 #endif
 			while (going)
 			{
@@ -418,6 +492,24 @@ static void *http_buffer_loop(void *arg)
 					break;
 				}
 			}
+#ifdef HTTP_SSL
+			if (ssl) {
+				int rc;
+
+				SSL_set_connect_state(ssl_c);
+
+				while ((rc = SSL_connect(ssl_c)) == -1);
+				if (rc <= 0) {
+					fprintf(stderr, "SSL_connect() error. SSL error code: %d.\n",
+							SSL_get_error(ssl_c, rc));
+				}
+				while ((rc = SSL_do_handshake(ssl_c)) == -1);
+				if (rc <= 0) {
+					fprintf(stderr, "SSL_do_handshake() error. SSL error code: %d.\n",
+							SSL_get_error(ssl_c, rc));
+				}
+			}
+#endif
 			if (!eof)
 			{
 				gchar *auth = NULL, *proxy_auth = NULL;
@@ -448,14 +540,30 @@ static void *http_buffer_loop(void *arg)
 					g_free(proxy_auth);
 				if(auth)
 					g_free(auth);
-				write(sock, temp, strlen(temp));
+#ifdef HTTP_SSL
+				if (ssl) {
+					int rc;
+					while ((rc = SSL_write(ssl_c, temp, strlen(temp))) == -1);
+					if (rc <= 0) {
+						fprintf(stderr, "SSL_write() error. SSL error code: %d.\n",
+								SSL_get_error(ssl_c, rc));
+						eof = TRUE;
+					}
+				} else
+#endif
+					write(sock, temp, strlen(temp));
+
 				g_free(temp);
 				vorbis_ip.set_info_text(_("CONNECTED: WAITING FOR REPLY"));
 				while (going && !eof)
 				  {
 					if (http_check_for_data())
 					{
+#ifdef HTTP_SSL
+						if (vorbis_http_read_line(line, 1024, ssl_c))
+#else
 						if (vorbis_http_read_line(line, 1024))
+#endif
 						{
 							status = strchr(line, ' ');
 							if (status)
@@ -468,7 +576,11 @@ static void *http_buffer_loop(void *arg)
 									{
 										if(http_check_for_data())
 										{
+#ifdef HTTP_SSL
+											if((cnt = vorbis_http_read_line(line, 1024, ssl_c)) != -1)
+#else
 											if((cnt = vorbis_http_read_line(line, 1024)) != -1)
+#endif
 											{
 												if(!cnt)
 													break;
@@ -510,7 +622,11 @@ static void *http_buffer_loop(void *arg)
 				{
 					if (http_check_for_data())
 					{
+#ifdef HTTP_SSL
+						if ((cnt = vorbis_http_read_line(line, 1024, ssl_c)) != -1)
+#else
 						if ((cnt = vorbis_http_read_line(line, 1024)) != -1)
+#endif
 						{
 							if (!cnt)
 								break;
@@ -536,6 +652,10 @@ static void *http_buffer_loop(void *arg)
 				fclose(output_file);
 				output_file = NULL;
 			}
+#ifdef HTTP_SSL
+			if (ssl)
+				SSL_shutdown(ssl_c);
+#endif
 			close(sock);
 			g_free(user);
 			g_free(pass);
@@ -551,6 +671,8 @@ static void *http_buffer_loop(void *arg)
 		output_name = file;
 		if (!strncasecmp(output_name, "http://", 7))
 			output_name += 7;
+		if (!strncasecmp(output_name, "https://", 8))
+			output_name += 8;
 		temp = strrchr(output_name, '.');
 		if (temp && !strcasecmp(temp, ".ogg"))
 			*temp = '\0';
@@ -577,7 +699,12 @@ static void *http_buffer_loop(void *arg)
 				cnt = min(http_free(), buffer_length - wr_index);
 				if (cnt > 1024)
 					cnt = 1024;
-				written = read(sock, buffer + wr_index, cnt);
+#ifdef HTTP_SSL
+				if (ssl)
+					while ((written = SSL_read(ssl_c, buffer + wr_index, cnt)) == -1);
+				else
+#endif
+					written = read(sock, buffer + wr_index, cnt);
 				if (written <= 0)
 				{
 					eof = TRUE;
@@ -618,6 +745,10 @@ static void *http_buffer_loop(void *arg)
 		fclose(output_file);
 		output_file = NULL;
 	}
+#ifdef HTTP_SSL
+	if (ssl)
+		SSL_shutdown(ssl_c);
+#endif
 	close(sock);
 
 
diff -Naurp xmms-1.2.10-r10/Input/vorbis/vorbis.c xmms-1.2.10-r10.ssl/Input/vorbis/vorbis.c
--- xmms-1.2.10-r10/Input/vorbis/vorbis.c	2005-01-31 14:24:03.456902000 -0800
+++ xmms-1.2.10-r10.ssl/Input/vorbis/vorbis.c	2005-01-31 14:54:32.944855238 -0800
@@ -136,7 +136,12 @@ static int vorbis_check_file(char *filen
 	char *ext;
 
 	/* is this our http resource? */
+#ifdef HTTP_SSL
+	if (strncasecmp(filename, "http://", 7) == 0 || 
+	    strncasecmp(filename, "https://", 8) == 0) {
+#else
 	if (strncasecmp(filename, "http://", 7) == 0) {
+#endif
 		ext = strrchr(filename, '.');
 		if (ext) {
 			if (!strncasecmp(ext, ".ogg", 4)) {
@@ -330,7 +335,12 @@ static void *vorbis_play_loop(void *arg)
 
 	memset(&vf, 0, sizeof(vf));
 
+#ifdef HTTP_SSL
+	if (strncasecmp("http://", filename, 7) && 
+	    strncasecmp("https://", filename, 8)) {
+#else
 	if (strncasecmp("http://", filename, 7) != 0) {
+#endif
 		/* file is a real file */
 		if ((stream = fopen(filename, "r")) == NULL) {
 			vorbis_eos = TRUE;
@@ -523,7 +533,12 @@ static void vorbis_get_song_info(char *f
 	FILE *stream;
 	OggVorbis_File vf; /* avoid thread interaction */
 	
+#ifdef HTTP_SSL
+	if (strncasecmp(filename, "http://", 7) && 
+	    strncasecmp(filename, "https://", 8)) {
+#else
 	if (strncasecmp(filename, "http://", 7)) {
+#endif
 		if ((stream = fopen(filename, "r")) == NULL)
 			return;
    
