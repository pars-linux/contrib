--- src/Panorama/PTOptimise.cpp	2007-10-24 19:30:32 UTC (rev 2491)
+++ src/Panorama/PTOptimise.cpp	2007-10-24 19:42:36 UTC (rev 2492)
@@ -36,9 +36,6 @@
 #include <boost/property_map.hpp>
 #include <boost/graph/graph_utility.hpp>
 
-#define DEBUG_WRITE_OPTIM_OUTPUT
-#define DEBUG_WRITE_OPTIM_OUTPUT_FILE "hugin_debug_optim_results.txt"
-
 using namespace std;
 using namespace PT;
 using namespace PTools;
@@ -132,13 +129,6 @@
 			RunLMOptimizer( &opt );
 			ainf.data		= opt.message;
             // get results from align info.
-#ifdef DEBUG_WRITE_OPTIM_OUTPUT
-            fullPath path;
-            StringtoFullPath(&path, DEBUG_WRITE_OPTIM_OUTPUT_FILE );
-
-		    ainf.data		= opt.message;
-            WriteResults( script, &path, &ainf, distSquared, 0);
-#endif
             pano.updateVariables(GetAlignInfoVariables(ainf) );
             pano.updateCtrlPointErrors( GetAlignInfoCtrlPoints(ainf) );
 		}

--- src/hugin/AutoCtrlPointCreator.cpp	2007-10-24 19:30:32 UTC (rev 2491)
+++ src/hugin/AutoCtrlPointCreator.cpp	2007-10-24 19:42:36 UTC (rev 2492)
@@ -225,7 +225,7 @@
 	}
 #endif
 
-    wxString ptofile(wxT("autopano_result_tempfile.pto"));
+    wxString ptofile = wxFileName::CreateTempFileName(wxT("ap_res"));
     autopanoArgs.Replace(wxT("%o"), ptofile);
     wxString tmp;
     tmp.Printf(wxT("%d"), nFeatures);
@@ -415,7 +415,7 @@
         imgNr++;
     }
 
-    wxString ptofile(wxT("autopano_result_tempfile"));
+    wxString ptofile = wxFileName::CreateTempFileName(wxT("ap_res"));
     autopanoArgs.Replace(wxT("%o"), ptofile);
     wxString tmp;
     tmp.Printf(wxT("%d"), nFeatures);


